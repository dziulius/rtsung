require 'rtsung'

rtsung = RTsung::XML.new do
  client 'localhost', :use_controller_vm => true

  client 'router', :max_users => 32

  client 'db1', :cpu => 2, :ip => '192.168.2.1', :weight => 1
  client 'db2', :cpu => 2, :ip => ['192.168.2.3', '192.168.2.4'], :weight => 2
  
  server 'example.com'
  server 'www.example.com', :port => 8080

  phase
  phase 2, :rate => 30
  phase 3, 30, :second, { :interval => 2 }

  session :search do
    request '/'
  end
end

print rtsung.to_xml
